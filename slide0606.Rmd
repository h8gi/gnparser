---
title: "\"gnparser\": a powerful parser for scientific names based on Parsing
Expression Grammar"
date: "`r lubridate::today()`"
author: "八木浩樹"
output: slidy_presentation
---

```{r setup, include = FALSE}
library(knitr)
library(tidyverse)
knitr::opts_chunk$set(cache = TRUE)
```

---

あああ

---

# パーサーってなに

- 文章をパースするプログラム
- ↓パース

```
> 今日は良い天気ですね
今日    名詞,副詞可能,*,*,*,*,今日,キョウ,キョー
は      助詞,係助詞,*,*,*,*,は,ハ,ワ
良い    形容詞,自立,*,*,形容詞・アウオ段,基本形,良い,ヨイ,ヨイ
天気    名詞,一般,*,*,*,*,天気,テンキ,テンキ
です    助動詞,*,*,*,特殊・デス,基本形,です,デス,デス
ね      助詞,終助詞,*,*,*,*,ね,ネ,ネ
```
- 自然言語はパースが難しい
- プログラミング言語はパースしやすい(そう作られているため)
```{r}
quote(3 * 5 + sqrt(3)) %>% as.list %>% str
```

---

## 正規表現 (Regular expression)

- 文字列の集合を一つの文字列で表現する方法
- 携帯電話番号(= 文字列の集合)の正規表現(= 文字列) → `[0-9]{3}-[0-9]{4}-[0-9]{4}`
- 主に文字列のマッチングに使われる
- パースのために使おうと思えば使えないこともない

--- 

## パースのために使おうと思えば使えないこともない 
### 気象庁の天気概要を例に
- https://www.data.jma.go.jp/obd/stats/data/mdrr/man/gaikyo.html
- "晴れ時々曇り後雪、雷を伴う"
- 「基本天気用語」（必須）　＋　「天気変化用語」（0～3語）　＋　「伴う現象」（0～1語）

---

## パースのために使おうと思えば使えないこともない 
### 気象庁の天気概要を例に

> (快晴|晴|曇|薄曇|大風|霧|霧雨|雨|大雨|暴風雨|みぞれ|雪|大雪|暴風雪|地ふぶき|ふぶき|ひょう|あられ|雷|×)(?:((一時|時々|後|後一時|後時々)(快晴|晴|曇|薄曇|大風|霧|霧雨|雨|大雨|暴風雨|みぞれ|雪|大雪|暴風雪|地ふぶき|ふぶき|ひょう|あられ|雷|×)){0,3})(?:、(快晴|晴|曇|薄曇|大風|霧|霧雨|雨|大雨|暴風雨|みぞれ|雪|大雪|暴風雪|地ふぶき|ふぶき|ひょう|あられ|雷|×)を伴う)?

- 人間のやることではない
- 再帰構造を表現できないなど、根本的な限界がある
    - 雑種の学名は "学名 × 学名" という再帰構造をもつ

---

## Parsing Expression Grammar (PEG)

- ある形式言語の文法を表現するための手法 
- ≒ プログラム言語のパーサーを書くための手法
- 正規表現では表現不可能だった再帰も扱える
- Yaccと似たようなもの

---

## Parsing Expression Grammar (PEG)
### 気象庁の天気概要を例に


> tenki <- 快晴|晴|曇|薄曇|大風|霧|霧雨|雨|大雨|暴風雨|みぞれ|雪|大雪|暴風雪|地ふぶき|ふぶき|ひょう|あられ|雷|×

> henka <- 一時|時々|後|後一時|後時々

> tenki (henka kihon)* (、kihon を伴う)?

- 上のPEG規則から、パーサーが生成される
- そのパーサーを使うことで、天気概要をパースできる


---

### hybrid

雑種の表記

---

# 八木の今後について

---

## サイエンスミュージアムネット



# このスライドは
